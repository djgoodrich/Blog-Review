<script>localStorage.setItem("returnURL", window.location.href);</script>
<nav class="navbar navbar-expand-lg navbar-light bg-light">
      <a class="navbar-brand" href="/"><img src="http://static.tumblr.com/9d8544b08a0439a9bac2fc1009555802/pk0ells/dDqmgt12d/tumblr_static_blog_logo.png" width="30" height="30" alt=""></a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent"
            aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav mr-auto">
                <li class="nav-item">
                    <button class="btn btn-outline-warning" data-toggle="modal" 
                    data-target={{#unless currentUserSub}}"#requiresLoginModal"{{/unless}}
                    {{#if currentUserSub}}"#addBlogModal"{{/if}}>Add Blog</button>

                    <!-- Modal that prompts sign in -->
                    <div class="modal fade bd-example-modal-sm" id="requiresLoginModal" tabindex="-1" role="dialog" aria-labelledby="requiresModalLogin" aria-hidden="true">
                        <div class="modal-dialog modal-sm">
                            <div class="modal-content addOne">
                                <p>You must log in to perform this action.</p>
                                <a href="/login" class="card-link"><button type="button" class="btn btn-outline-success login">Sign up/Log in</button></a>
                            </div>
                        </div>
                    </div>

                    <!--Modal to add a new blog-->
                    <div class="modal fade" id="addBlogModal" tabindex="-1" role="dialog" aria-labelledby="addBlogModal" aria-hidden="true">
                        <div class="modal-dialog modal-lg">
                            <div class="modal-content addOne">
                                <form action="/api/blogs" method="POST" id="addBlogForm">
                                    <div class="form-group row">
                                        <label for="blogTitle" class="col-sm-2 col-form-label">Blog Title*</label>
                                        <div class="col-sm-10" id="blogTitleHelper">
                                            <input type="text" class="form-control" id="blogTitle" name="title" placeholder="Title">
                                        </div>
                                    </div>
                                    <div class="form-group row">
                                        <label for="website" class="col-sm-2 col-form-label">Website*</label>
                                        <div class="col-sm-10" id="websiteHelper">
                                            <input type="text" class="form-control" id="website" name="website" placeholder="http://example.com">
                                        </div>
                                    </div>
                                     <div class="form-group row">
                                        <label for="description" class="col-sm-2 col-form-label">Description*</label>
                                        <div class="col-sm-10" id="descriptionHelper">
                                            <input type="text" class="form-control" name="description" id="description">
                                        </div>
                                    </div>
                                    <div class="form-group row">
                                        <label for="blogAuthor" class="col-sm-2 col-form-label">Blog Author*</label>
                                        <div class="col-sm-10" id="blogAuthorHelper">
                                            <input type="text" class="form-control" name="blog_author" id="blogAuthor">
                                        </div>
                                    </div>
                                    <div class="form-group row">
                                        <div class="col-sm-10">
                                            <button type="submit" class="btn btn-outline-danger" id="add-blog">Add</button>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>

                </li>
            </ul>
            {{#unless currentUserSub}}
            <a href="/login" class="card-link"><button type="button" class="btn btn-outline-success login">Sign up/Log in</button></a>
            {{/unless}}
            {{#if currentUserSub}}
            <a href="/logout" class="card-link"><button type="button" class="btn btn-outline-success login">Log out</button></a>
            {{/if}}
            <form class="form-inline my-2 my-lg-0">
                <input class="form-control mr-sm-2" type="text" placeholder="Search for a blog" aria-label="Search">
                <button class="btn btn-outline-primary my-2 my-sm-0" type="submit">Search</button>
            </form>
        </div>
    </nav>